##1.创建项目
	--1.1 验证node环境是不是正常   node -v
	--1.2 安装 cnpm  淘宝镜像   cnpm -v
		npm install -g cnpm --registry=https://registry.npm.taobao.org
	--1.3 全局安装 react的脚手架  npm install -g create-react-app
	--1.4 进入文件夹 
		E:
	--1.5 安装项目
		create-react-app web21-router-qcs
	--1.6 进入项目
		cd web21-router-qcs
	--1.7 运行
		npm start

##2.安装依赖
react-router-dom（路由） axios（获取数据） http-proxy-middleware（解决跨域） react-flexible（移动端的自适应） swiper@3.4.2（轮播） antd（蚂蚁金服ui） reset-css（浏览器默认样式重置）
cnpm install --save react-router-dom axios http-proxy-middleware react-flexible swiper@3.4.2 antd reset-css
cnpm install --save-dev scss scss-loader node-sass

##3.创建路由相关内容
	--3.1 创建页面
	src/pages/main/index.js
```
import React,{Component} from 'react';
class Main extends Component{
	render(){
		return (
			<div>首页</div>
		) 
	}
}
export default Main;
	```
	src/pages/mask/index.js
	src/pages/good/index.js
	src/pages/global/index.js
	--3.2 写路由
	创建路由文件
	src/router/index.js
```
//引入插件
import React from 'react';
import {BrowserRouter,Route,Switch,Link} from 'react-router-dom';
//引入页面
import Main from '../pages/main';
import Global from '../pages/global';
import Good from '../pages/good';
import Mask from '../pages/mask';
 //写路由表
 const App =()=>(
	<BrowserRouter>
		<div>
			<div>
				<Link to="/">今日推荐</Link>
				<Link to="/mask">面膜中心</Link>
				<Link to="/good">潮流好物</Link>
				<Link to="/global">购全球</Link>
			</div>
			<div>
				<Route path="/"  exact={true} component={Main} />
				<Route path="/mask" component={Mask} />
				<Route path="/good" component={Good} />
				<Route path="/global" component={Global} />
			</div>
		</div>
	</BrowserRouter>
 )
 //输出
export default App;
	```
	--3.3 将路由引入到src/index.js
	将第4行修改为以下代码
```
import App from './router';
	```
##4.将头部区域做成组件
	--4.1 创建头部组件的文件
	src/components/common/header/index.js
```
import React,{Component} from 'react';
//引入路由包
import {NavLink} from 'react-router-dom';
//引入蚂蚁金服的ui
import {Row,Col,Input} from 'antd';
import { UserOutlined,ShoppingCartOutlined,SearchOutlined} from '@ant-design/icons';
//引入css
import './header.scss';
class Header extends Component{
	render(){
		return (
			<div className="qcs-header">
				<Row className="qcs-h-search">
					<Col span={4}>
						<UserOutlined className="header-font"/>
					</Col>
				    <Col span={16}>
						 <Input size="middle" className="header-input" placeholder="保湿面膜0.1元" prefix={<SearchOutlined />} />
					</Col>
				    <Col span={4}>
						<ShoppingCartOutlined className="header-font"/>
					</Col>
				</Row>
				<nav className="qcs-h-nav">
					<ul>
						<li><NavLink to="/" exact={true} activeClassName="active">今日推荐</NavLink></li>
						<li><NavLink to="/mask">面膜中心</NavLink></li>
						<li><NavLink to="/good">潮流好物</NavLink></li>
						<li><NavLink to="/global">购全球</NavLink></li>
					</ul>
				</nav>
			</div>
		)
	}
}
export default Header;
	```
	--4.2 创建 头部的scss文件
	src/components/common/header/header.scss
```
.qcs-header{
	position: fixed;
	top:0;
	left:0;
	right:0;
	height:100px;
	background: #fff;
	.qcs-h-search{
		height:50px;
		line-height: 50px;
		text-align:center;
		border-bottom:1px solid #ccc;
		.header-font{font-size:20px;}
		.header-input{border-radius: 20px;}
	}
	.qcs-h-nav{
		height:50px; 
		line-height:50px;
		ul{
			display: flex;
			justify-content: space-around;
			flex-wrap: nowrap;
			li{
				a{color:#000; font-size:16px;display: inline-block; height:45px;}
				a.active{
					fontsize:16px;
					color:#ff6692;
					border-bottom:3px solid #ff6692;
				}
			}
		}
	}
}
	```
	--4.3 在 src/index.js中引入相应的css
	添加了以下三句：
```
//重置浏览器的默认样式
import "reset-css";
//rem
import "react-flexible";
//引入蚂蚁金服
import "antd/dist/antd.min.css";

	```
	
	--4.4 修改src/router/index.js
```
//路由
//引入插件
import React from 'react';
import {BrowserRouter,Route,Switch,Link} from 'react-router-dom';
//引入页面
import Main from '../pages/main';
import Global from '../pages/global';
import Good from '../pages/good';
import Mask from '../pages/mask';

//引入 头部组件
import Header from '../components/common/header';
 //写路由表
 const App =()=>(
	<BrowserRouter>
		<div>
			<div>
				<Header />
			</div>
			<div className="qcs-content">
				<Route path="/"  exact={true} component={Main} />
				<Route path="/mask" component={Mask} />
				<Route path="/good" component={Good} />
				<Route path="/global" component={Global} />
			</div>
		</div>
	</BrowserRouter>
 )
 //输出
export default App;
	```
	--4.5 修改了src/index.css
```
.qcs-content{margin-top:100px;}
	```
	
## 5. 添加404页面
	--5.1 创建404页面
	 src/pages/page404.js
```
import React,{Component} from 'react';
class Page404 extends Component{
	render(){
		return (
			<div>404页面</div>
		) 
	}
}
export default Page404;
	 ```
	 --5.2修改路由
在src/router/index.js 文件中新增以下代码
```
import Page404 from '../pages/page404';

<Switch>
	
	<Route  component={Page404} />
</Switch>
	 ```
	 
## 6.获取首页的数据，并渲染
	--6.0 安装 http-proxy-middleware
	cnpm install --save http-proxy-middleware@0.20.0
	或
	npm install --save http-proxy-middleware@0.20.0
	
	--6.1 配置允许跨域
	 主目录下找到 package.json,添加一句话
```
"proxy":"https://h5.watsons.com.cn/",
	 ```
	 --6.2 修改主页的代码
	 src/pages/main/index.js
```
import React,{Component} from 'react';
//引入axios
import axios from 'axios';

import './index.scss';
class Main extends Component{
	constructor() {
	    super();
		this.state = {
			bimaiList:[]
		}
	}
	componentDidMount(){
		axios.get("item/ws/group_list?current_page=1&page_size=9&group_id=28797&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				bimaiList:res.data.data.item_list
			})
		})
	}
	render(){
		const {bimaiList} = this.state;
		return (
			<div className="main-con">
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/d05b93ca.png"/></div>
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/61fbcc3d.gif"/></div>
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/998a3a0c.jpg"/></div>
				<ul className="bimai-con">
					{
						bimaiList.map(item=><li key={item.item_id}>
							<img src={item.over_image_url} />
							{item.item_short_name}
						</li>)
					}
				</ul>
			</div>
		) 
	}
}
export default Main;
	 ```
	 --6.3添加相应的css样式
	 src/pages/main/index.scss
```
.main-con{
	.main-img{
		img{width: 100%;}
	}
	.bimai-con{
		
		display: flex;
		flex-wrap: wrap;
		justify-content: space-around;
		background-color: rgb(255, 231, 227);
		padding-left:2%;
		padding-right:2%;
		li{
			width: 32%; 
			margin-bottom:3px;
			//border:1px solid red;
			background:#fff;
			img{
				width:100%;
			}
		}
	}
}
	 ```
	 
## 7.将页面的每个部分都写成组件的形式
	-- 7.1首先创建组件
	src/components/main/bimai.js
```
import React,{Component} from 'react';
class Bimai extends Component{
	render(){
		let {bimaiList} = this.props;
		return (
			<ul className="bimai-con">
				{
					bimaiList.map(item=><li key={item.item_id} >
						<img src={item.over_image_url} alt={item.item_short_name}/>
						{item.item_short_name}
					</li>)
				}
			</ul>
		)
		
	}
}

export default Bimai;
	```
	
	--7.2 需要在首页调用 src/pages/main/index.js
```

//引入必买部分组件
import Bimai from '../../components/main/bimai.js';
<!--必买爆款-->
				<Bimai  bimaiList={bimaiList}/>
	```
	
	--7.3 必买爆款的nav点击切换
```
constructor() {
	    super();
		this.state = {
			bimaiList:[],
			bimaiNav:[//必买爆款的变量
				{"id":1,"group_id":28797,"name":"畅销尖货",activeType:true},
				{"id":2,"group_id":28798,"name":"春夏必备",activeType:false},
				{"id":3,"group_id":28799,"name":"低价精选",activeType:false},
				{"id":4,"group_id":28800,"name":"当季热卖",activeType:false}
			]
		}
	}
	componentDidMount(){
		this.getBiMaiData(28797);
	}
	//重新获取数据的函数
	getBiMaiData=(group_id)=>{
		console.log(group_id);
		let bimaiNav = this.state.bimaiNav;
		//需要修改nav的activeType
		for(var i = 0;i<bimaiNav.length;i++){
			bimaiNav[i].activeType = false;
			if(bimaiNav[i].group_id == group_id){
				bimaiNav[i].activeType = true;
			}
		}
		//将最新的bimaiNav保存到state
		this.setState({
			bimaiNav:bimaiNav
		})
		axios.get("item/ws/group_list?current_page=1&page_size=9&group_id="+group_id+"&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				bimaiList:res.data.data.item_list
			})
		})
	}
	
	
	
	 ```
	html:
```
<ul className="bimai-nav">
	{
		bimaiNav.map(item=>(<li key={item.id} 
		className={item.activeType?"active":""}  
		onClick={this.getBiMaiData.bind(this,item.group_id)}>
		{item.name}
		
		</li>))
	}
	</ul>
	 ```
	 
##8.轮播效果
	--8.1 在main里面添加 变量，获取数据  src/pages/main/index.js
```
lunboList:[]//轮播
componentDidMount(){
		this.getBiMaiData(28797);
		//获取数据
		this.getLunboData();
	}
	
	//轮播数据
	getLunboData=()=>{
		axios.get("aladdin/get_batch_data?codes=[%22%E4%B8%B4%E6%97%B6%22,%22chajian%22,%22newhome_10icon_one_img2%22,%22newhome_10icon_one_img1%22,%22new_Home_4navs_180105_1%22,%22Home_seckill%22]&version=&app_channel=wap&plat=wap&access_token=&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				lunboList:res.data.data.chajian.datas
			})
		})
	}
	```
	--8.2添加轮播组件
	src/components/main/mainswiper.js
```
import React,{Component} from 'react';
//轮播 3.4.2版本的引入
import Swiper from 'swiper/dist/js/swiper.min.js';
import 'swiper/dist/css/swiper.min.css';
//引入css样式
import './mainswiper.scss';
class MainSwiper extends Component{
	componentDidMount(){
		new Swiper('.swiper-container',{
			loop:true,
			autoplay:1000,
			observer:true,//数据是异步的
			observeParents:true,
			// 如果需要分页器
			pagination: '.swiper-pagination',
			// 如果需要前进后退按钮
			nextButton: '.swiper-button-next',
			prevButton: '.swiper-button-prev',
		})
	}
	render(){
		let {lunboList} = this.props;
		console.log(lunboList);
		return (
			<div className="swiper-container">
			    <div className="swiper-wrapper">
				{
					lunboList.map((item)=>(
						<div className="swiper-slide" key={item.id}>
							<img src={item.image_url} alt={item.id}/>
						</div>
					))
				}
			    </div>
				<div className="swiper-pagination"></div>
				<div className="swiper-button-prev"></div>
				<div className="swiper-button-next"></div>
			</div>
		)
		
	}
}
export default MainSwiper;
	```
	--8.3 轮播图组件的样式
	src/components/main/mainswiper.scss
```
.swiper-container{
	.swiper-wrapper{
		.swiper-slide{
			img{width:100%;}
		}
	}
}
 .swiper-button-next, .swiper-button-prev{
	background: rgba(0,0,0,0.5) url("https://image.watsons.com.cn//upload/efbab720.png")
	50% 50% no-repeat;
	width:17px;
	color:blue;
}
 .swiper-button-prev{
	background: rgba(0,0,0,0.5) url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E")
	50% 50% no-repeat;
	
}

	```
	
	--8.4把组件引入到 main文件中
src/pages/main/index.js

```
import MainSwiper from '../../components/main/mainswiper.js';
const {bimaiList,bimaiNav,lunboList} = this.state;


{/*轮播*/}
<MainSwiper lunboList={lunboList}/>
	```
	
##9.今日秒杀
	--9.1 创建 今日秒杀的组件
	src/components/main/jinrimiaosha.js
```
import React,{Component} from 'react';
import './jinrimiaosha.scss';
class JinRiMiaoSha extends Component{
	constructor() {
	    super();
		this.state = {
			daojishi:['00','00','00'] //表示倒计时的时分秒
		}
	}
	componentDidMount(){
		let miaoshaTime = this.props.endTime-this.props.nowTime;//秒杀的时间戳
		//console.log(miaoshaTime);
		setInterval(()=>{
			miaoshaTime -= 1000;
			//将事件戳转日期时间
			let time = this.formatTime(new Date(miaoshaTime));
			//console.log(time);
			//将time 的时间值保存到 state
			this.setState({
				daojishi:time
			})
		},1000);
		
	}
	//将事件戳转日期时间
	formatTime=(date)=>{
		let time = date/1000;
		const s = Math.floor(time%60);
		const m = Math.floor(time/60%60);
		const h = Math.floor(time/60/60%24);
		return [h,m,s].map(this.addZero);
	}
	//时间如果是一位数,请在前面加零
	addZero =(n)=>{
		if(n>9){
			return n;
		}else{
			return "0"+n;
		}
	}
	
	render(){
		//console.log(this.props.nowTime);
		//console.log(this.props.endTime);
		let {miaoshaList} = this.props;
		let {daojishi} = this.state;
		return (
			<div className="jinri-con">
				<div className="miaosha">
					今日秒杀
					<span className="djs">
						<span>{daojishi[0]}</span>:
						<span>{daojishi[1]}</span>:
						<span>{daojishi[2]}</span>
					</span>
					<span className="more">更多好货> </span>
				</div>
				<div className="miaosha1">
				{
					miaoshaList.map((item,index)=>{
						return (
							<div className="neir" key={index}>
								<div className="biqiang">必抢</div>
								<img src={item.image_url} alt={item.item_id}/>
								<div className="name">{item.item_short_name}</div>
								<div>money</div>
							</div>
						)
					})
				}	
				</div>
			</div>
		)
	}
}

export default JinRiMiaoSha;
	```
	
	src/components/main/jinrimiaosha.scss
```
.jinri-con{
	width: 100%;
	background: url(https://image.watsons.com.cn//upload/b875a675.png);
	height:5.493333rem;
	background-size: cover;
	
	.miaosha{
		height:1.333333rem;
		line-height: 1.333333rem;
		font-size:16px;
		font-weight: bold;
		padding-left:0.533333rem;
		.djs{
			padding-left:0.533333rem;
			display: inline-block;
			margin-bottom:0.186666rem;
			span{
				font-size:12px;
				background: #000;
				color:#fff;
				padding:0.053333rem;
			}
		}
		.more{padding-left:2.4rem;}
	}
	.miaosha1{
		width:9.173333rem;
		height:3.733333rem;
		margin:0.266666rem 0.4rem;
		
		display:flex;
		overflow-x: scroll;
		border-radius: 5px;
		.neir{
			margin-left:0.133333rem;
			margin-right:0.133333rem;
			width: 2.533333rem;
			bordeR:1px solid #ededed;
			background: #fff;
			border-radius: 5px;
			position: relative;
			img{
				height:2.48rem;
				width:2.48rem;
				border-radius: 5px;
			}
			.name{
				border-top:1px solid #ededed;
				padding:5px;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}
			.biqiang{
				position: absolute;
				    top: 2rem;
				    left: 0px;
				    background: orangered;
				    color: #fff;
				    padding: 3px;
				    border-radius: 2px;
			}
		}
	}
	/*chrome浏览器下去除横向滚动条*/
	.miaosha1::-webkit-scrollbar{
		display:none;
	}
}
//样式需要将 px转rem
	```
	--9.2 将组件引入到main页面，并且在html调用该组件，传参
	定义变量
```
miaoshaList:[],//秒杀列表
			nowTime:0,//现在的时间戳
			endTime:0//结束的事件戳
			
			
```
获取数据
```
componentDidMount(){
		
		//获取秒杀数据
		this.getMiaoShaData();
	}
	
	//秒杀数据
	getMiaoShaData=()=>{
		axios.get("activity/specials/info?count=8&code=Home_flashSale__Top_Img&stock_code=&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				miaoshaList:res.data.data.specials_item_v_o_s,
				nowTime:res.data.data.now,
				endTime:res.data.data.specials_time_ranges[0].end
			})
		})
	}
```
html中引入组件，传参
```
const {bimaiList,bimaiNav,lunboList,miaoshaList,nowTime,endTime} = this.state;

{
	nowTime !==0 && endTime!==0?
	<JinRiMiaoSha miaoshaList={miaoshaList} nowTime={nowTime} endTime={endTime}/>:""	
}
```

	
	
	
	
	
	
	