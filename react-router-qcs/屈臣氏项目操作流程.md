##1.创建项目
	--1.1 验证node环境是不是正常   node -v
	--1.2 安装 cnpm  淘宝镜像   cnpm -v
		npm install -g cnpm --registry=https://registry.npm.taobao.org
	--1.3 全局安装 react的脚手架  npm install -g create-react-app
	--1.4 进入文件夹 
		E:
	--1.5 安装项目
		create-react-app web21-router-qcs
	--1.6 进入项目
		cd web21-router-qcs
	--1.7 运行
		npm start

##2.安装依赖
react-router-dom（路由） axios（获取数据） http-proxy-middleware（解决跨域） react-flexible（移动端的自适应） swiper@3.4.2（轮播） antd（蚂蚁金服ui） reset-css（浏览器默认样式重置）
cnpm install --save react-router-dom axios http-proxy-middleware react-flexible swiper@3.4.2 antd reset-css
cnpm install --save-dev scss scss-loader node-sass

##3.创建路由相关内容
	--3.1 创建页面
	src/pages/main/index.js
```
import React,{Component} from 'react';
class Main extends Component{
	render(){
		return (
			<div>首页</div>
		) 
	}
}
export default Main;
	```
	src/pages/mask/index.js
	src/pages/good/index.js
	src/pages/global/index.js
	--3.2 写路由
	创建路由文件
	src/router/index.js
```
//引入插件
import React from 'react';
import {BrowserRouter,Route,Switch,Link} from 'react-router-dom';
//引入页面
import Main from '../pages/main';
import Global from '../pages/global';
import Good from '../pages/good';
import Mask from '../pages/mask';
 //写路由表
 const App =()=>(
	<BrowserRouter>
		<div>
			<div>
				<Link to="/">今日推荐</Link>
				<Link to="/mask">面膜中心</Link>
				<Link to="/good">潮流好物</Link>
				<Link to="/global">购全球</Link>
			</div>
			<div>
				<Route path="/"  exact={true} component={Main} />
				<Route path="/mask" component={Mask} />
				<Route path="/good" component={Good} />
				<Route path="/global" component={Global} />
			</div>
		</div>
	</BrowserRouter>
 )
 //输出
export default App;
	```
	--3.3 将路由引入到src/index.js
	将第4行修改为以下代码
```
import App from './router';
	```
##4.将头部区域做成组件
	--4.1 创建头部组件的文件
	src/components/common/header/index.js
```
import React,{Component} from 'react';
//引入路由包
import {NavLink} from 'react-router-dom';
//引入蚂蚁金服的ui
import {Row,Col,Input} from 'antd';
import { UserOutlined,ShoppingCartOutlined,SearchOutlined} from '@ant-design/icons';
//引入css
import './header.scss';
class Header extends Component{
	render(){
		return (
			<div className="qcs-header">
				<Row className="qcs-h-search">
					<Col span={4}>
						<UserOutlined className="header-font"/>
					</Col>
				    <Col span={16}>
						 <Input size="middle" className="header-input" placeholder="保湿面膜0.1元" prefix={<SearchOutlined />} />
					</Col>
				    <Col span={4}>
						<ShoppingCartOutlined className="header-font"/>
					</Col>
				</Row>
				<nav className="qcs-h-nav">
					<ul>
						<li><NavLink to="/" exact={true} activeClassName="active">今日推荐</NavLink></li>
						<li><NavLink to="/mask">面膜中心</NavLink></li>
						<li><NavLink to="/good">潮流好物</NavLink></li>
						<li><NavLink to="/global">购全球</NavLink></li>
					</ul>
				</nav>
			</div>
		)
	}
}
export default Header;
	```
	--4.2 创建 头部的scss文件
	src/components/common/header/header.scss
```
.qcs-header{
	position: fixed;
	top:0;
	left:0;
	right:0;
	height:100px;
	background: #fff;
	.qcs-h-search{
		height:50px;
		line-height: 50px;
		text-align:center;
		border-bottom:1px solid #ccc;
		.header-font{font-size:20px;}
		.header-input{border-radius: 20px;}
	}
	.qcs-h-nav{
		height:50px; 
		line-height:50px;
		ul{
			display: flex;
			justify-content: space-around;
			flex-wrap: nowrap;
			li{
				a{color:#000; font-size:16px;display: inline-block; height:45px;}
				a.active{
					fontsize:16px;
					color:#ff6692;
					border-bottom:3px solid #ff6692;
				}
			}
		}
	}
}
	```
	--4.3 在 src/index.js中引入相应的css
	添加了以下三句：
```
//重置浏览器的默认样式
import "reset-css";
//rem
import "react-flexible";
//引入蚂蚁金服
import "antd/dist/antd.min.css";

	```
	
	--4.4 修改src/router/index.js
```
//路由
//引入插件
import React from 'react';
import {BrowserRouter,Route,Switch,Link} from 'react-router-dom';
//引入页面
import Main from '../pages/main';
import Global from '../pages/global';
import Good from '../pages/good';
import Mask from '../pages/mask';

//引入 头部组件
import Header from '../components/common/header';
 //写路由表
 const App =()=>(
	<BrowserRouter>
		<div>
			<div>
				<Header />
			</div>
			<div className="qcs-content">
				<Route path="/"  exact={true} component={Main} />
				<Route path="/mask" component={Mask} />
				<Route path="/good" component={Good} />
				<Route path="/global" component={Global} />
			</div>
		</div>
	</BrowserRouter>
 )
 //输出
export default App;
	```
	--4.5 修改了src/index.css
```
.qcs-content{margin-top:100px;}
	```
	
## 5. 添加404页面
	--5.1 创建404页面
	 src/pages/page404.js
```
import React,{Component} from 'react';
class Page404 extends Component{
	render(){
		return (
			<div>404页面</div>
		) 
	}
}
export default Page404;
	 ```
	 --5.2修改路由
在src/router/index.js 文件中新增以下代码
```
import Page404 from '../pages/page404';

<Switch>
	
	<Route  component={Page404} />
</Switch>
	 ```
	 
## 6.获取首页的数据，并渲染
	--6.0 安装 http-proxy-middleware
	cnpm install --save http-proxy-middleware@0.20.0
	或
	npm install --save http-proxy-middleware@0.20.0
	
	--6.1 配置允许跨域
	 主目录下找到 package.json,添加一句话
```
"proxy":"https://h5.watsons.com.cn/",
	 ```
	 --6.2 修改主页的代码
	 src/pages/main/index.js
```
import React,{Component} from 'react';
//引入axios
import axios from 'axios';

import './index.scss';
class Main extends Component{
	constructor() {
	    super();
		this.state = {
			bimaiList:[]
		}
	}
	componentDidMount(){
		axios.get("item/ws/group_list?current_page=1&page_size=9&group_id=28797&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				bimaiList:res.data.data.item_list
			})
		})
	}
	render(){
		const {bimaiList} = this.state;
		return (
			<div className="main-con">
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/d05b93ca.png"/></div>
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/61fbcc3d.gif"/></div>
				<div className="main-img"><img src="https://image.watsons.com.cn//upload/998a3a0c.jpg"/></div>
				<ul className="bimai-con">
					{
						bimaiList.map(item=><li key={item.item_id}>
							<img src={item.over_image_url} />
							{item.item_short_name}
						</li>)
					}
				</ul>
			</div>
		) 
	}
}
export default Main;
	 ```
	 --6.3添加相应的css样式
	 src/pages/main/index.scss
```
.main-con{
	.main-img{
		img{width: 100%;}
	}
	.bimai-con{
		
		display: flex;
		flex-wrap: wrap;
		justify-content: space-around;
		background-color: rgb(255, 231, 227);
		padding-left:2%;
		padding-right:2%;
		li{
			width: 32%; 
			margin-bottom:3px;
			//border:1px solid red;
			background:#fff;
			img{
				width:100%;
			}
		}
	}
}
	 ```
	 
## 7.将页面的每个部分都写成组件的形式
	-- 7.1首先创建组件
	src/components/main/bimai.js
```
import React,{Component} from 'react';
class Bimai extends Component{
	render(){
		let {bimaiList} = this.props;
		return (
			<ul className="bimai-con">
				{
					bimaiList.map(item=><li key={item.item_id} >
						<img src={item.over_image_url} alt={item.item_short_name}/>
						{item.item_short_name}
					</li>)
				}
			</ul>
		)
		
	}
}

export default Bimai;
	```
	
	--7.2 需要在首页调用 src/pages/main/index.js
```

//引入必买部分组件
import Bimai from '../../components/main/bimai.js';
<!--必买爆款-->
				<Bimai  bimaiList={bimaiList}/>
	```
	
	--7.3 必买爆款的nav点击切换
```
constructor() {
	    super();
		this.state = {
			bimaiList:[],
			bimaiNav:[//必买爆款的变量
				{"id":1,"group_id":28797,"name":"畅销尖货",activeType:true},
				{"id":2,"group_id":28798,"name":"春夏必备",activeType:false},
				{"id":3,"group_id":28799,"name":"低价精选",activeType:false},
				{"id":4,"group_id":28800,"name":"当季热卖",activeType:false}
			]
		}
	}
	componentDidMount(){
		this.getBiMaiData(28797);
	}
	//重新获取数据的函数
	getBiMaiData=(group_id)=>{
		console.log(group_id);
		let bimaiNav = this.state.bimaiNav;
		//需要修改nav的activeType
		for(var i = 0;i<bimaiNav.length;i++){
			bimaiNav[i].activeType = false;
			if(bimaiNav[i].group_id == group_id){
				bimaiNav[i].activeType = true;
			}
		}
		//将最新的bimaiNav保存到state
		this.setState({
			bimaiNav:bimaiNav
		})
		axios.get("item/ws/group_list?current_page=1&page_size=9&group_id="+group_id+"&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				bimaiList:res.data.data.item_list
			})
		})
	}
	
	
	
	 ```
	html:
```
<ul className="bimai-nav">
	{
		bimaiNav.map(item=>(<li key={item.id} 
		className={item.activeType?"active":""}  
		onClick={this.getBiMaiData.bind(this,item.group_id)}>
		{item.name}
		
		</li>))
	}
	</ul>
	 ```
	 
##8.轮播效果
	--8.1 在main里面添加 变量，获取数据  src/pages/main/index.js
```
lunboList:[]//轮播
componentDidMount(){
		this.getBiMaiData(28797);
		//获取数据
		this.getLunboData();
	}
	
	//轮播数据
	getLunboData=()=>{
		axios.get("aladdin/get_batch_data?codes=[%22%E4%B8%B4%E6%97%B6%22,%22chajian%22,%22newhome_10icon_one_img2%22,%22newhome_10icon_one_img1%22,%22new_Home_4navs_180105_1%22,%22Home_seckill%22]&version=&app_channel=wap&plat=wap&access_token=&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				lunboList:res.data.data.chajian.datas
			})
		})
	}
	```
	--8.2添加轮播组件
	src/components/main/mainswiper.js
```
import React,{Component} from 'react';
//轮播 3.4.2版本的引入
import Swiper from 'swiper/dist/js/swiper.min.js';
import 'swiper/dist/css/swiper.min.css';
//引入css样式
import './mainswiper.scss';
class MainSwiper extends Component{
	componentDidMount(){
		new Swiper('.swiper-container',{
			loop:true,
			autoplay:1000,
			observer:true,//数据是异步的
			observeParents:true,
			// 如果需要分页器
			pagination: '.swiper-pagination',
			// 如果需要前进后退按钮
			nextButton: '.swiper-button-next',
			prevButton: '.swiper-button-prev',
		})
	}
	render(){
		let {lunboList} = this.props;
		console.log(lunboList);
		return (
			<div className="swiper-container">
			    <div className="swiper-wrapper">
				{
					lunboList.map((item)=>(
						<div className="swiper-slide" key={item.id}>
							<img src={item.image_url} alt={item.id}/>
						</div>
					))
				}
			    </div>
				<div className="swiper-pagination"></div>
				<div className="swiper-button-prev"></div>
				<div className="swiper-button-next"></div>
			</div>
		)
		
	}
}
export default MainSwiper;
	```
	--8.3 轮播图组件的样式
	src/components/main/mainswiper.scss
```
.swiper-container{
	.swiper-wrapper{
		.swiper-slide{
			img{width:100%;}
		}
	}
}
 .swiper-button-next, .swiper-button-prev{
	background: rgba(0,0,0,0.5) url("https://image.watsons.com.cn//upload/efbab720.png")
	50% 50% no-repeat;
	width:17px;
	color:blue;
}
 .swiper-button-prev{
	background: rgba(0,0,0,0.5) url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2027%2044'%3E%3Cpath%20d%3D'M0%2C22L22%2C0l2.1%2C2.1L4.2%2C22l19.9%2C19.9L22%2C44L0%2C22L0%2C22L0%2C22z'%20fill%3D'%23007aff'%2F%3E%3C%2Fsvg%3E")
	50% 50% no-repeat;
	
}

	```
	
	--8.4把组件引入到 main文件中
src/pages/main/index.js

```
import MainSwiper from '../../components/main/mainswiper.js';
const {bimaiList,bimaiNav,lunboList} = this.state;


{/*轮播*/}
<MainSwiper lunboList={lunboList}/>
	```
	
##9.今日秒杀
	--9.1 创建 今日秒杀的组件
	src/components/main/jinrimiaosha.js
```
import React,{Component} from 'react';
import './jinrimiaosha.scss';
class JinRiMiaoSha extends Component{
	constructor() {
	    super();
		this.state = {
			daojishi:['00','00','00'] //表示倒计时的时分秒
		}
	}
	componentDidMount(){
		let miaoshaTime = this.props.endTime-this.props.nowTime;//秒杀的时间戳
		//console.log(miaoshaTime);
		setInterval(()=>{
			miaoshaTime -= 1000;
			//将事件戳转日期时间
			let time = this.formatTime(new Date(miaoshaTime));
			//console.log(time);
			//将time 的时间值保存到 state
			this.setState({
				daojishi:time
			})
		},1000);
		
	}
	//将事件戳转日期时间
	formatTime=(date)=>{
		let time = date/1000;
		const s = Math.floor(time%60);
		const m = Math.floor(time/60%60);
		const h = Math.floor(time/60/60%24);
		return [h,m,s].map(this.addZero);
	}
	//时间如果是一位数,请在前面加零
	addZero =(n)=>{
		if(n>9){
			return n;
		}else{
			return "0"+n;
		}
	}
	
	render(){
		//console.log(this.props.nowTime);
		//console.log(this.props.endTime);
		let {miaoshaList} = this.props;
		let {daojishi} = this.state;
		return (
			<div className="jinri-con">
				<div className="miaosha">
					今日秒杀
					<span className="djs">
						<span>{daojishi[0]}</span>:
						<span>{daojishi[1]}</span>:
						<span>{daojishi[2]}</span>
					</span>
					<span className="more">更多好货> </span>
				</div>
				<div className="miaosha1">
				{
					miaoshaList.map((item,index)=>{
						return (
							<div className="neir" key={index}>
								<div className="biqiang">必抢</div>
								<img src={item.image_url} alt={item.item_id}/>
								<div className="name">{item.item_short_name}</div>
								<div>money</div>
							</div>
						)
					})
				}	
				</div>
			</div>
		)
	}
}

export default JinRiMiaoSha;
	```
	
	src/components/main/jinrimiaosha.scss
```
.jinri-con{
	width: 100%;
	background: url(https://image.watsons.com.cn//upload/b875a675.png);
	height:5.493333rem;
	background-size: cover;
	
	.miaosha{
		height:1.333333rem;
		line-height: 1.333333rem;
		font-size:16px;
		font-weight: bold;
		padding-left:0.533333rem;
		.djs{
			padding-left:0.533333rem;
			display: inline-block;
			margin-bottom:0.186666rem;
			span{
				font-size:12px;
				background: #000;
				color:#fff;
				padding:0.053333rem;
			}
		}
		.more{padding-left:2.4rem;}
	}
	.miaosha1{
		width:9.173333rem;
		height:3.733333rem;
		margin:0.266666rem 0.4rem;
		
		display:flex;
		overflow-x: scroll;
		border-radius: 5px;
		.neir{
			margin-left:0.133333rem;
			margin-right:0.133333rem;
			width: 2.533333rem;
			bordeR:1px solid #ededed;
			background: #fff;
			border-radius: 5px;
			position: relative;
			img{
				height:2.48rem;
				width:2.48rem;
				border-radius: 5px;
			}
			.name{
				border-top:1px solid #ededed;
				padding:5px;
				overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
			}
			.biqiang{
				position: absolute;
				    top: 2rem;
				    left: 0px;
				    background: orangered;
				    color: #fff;
				    padding: 3px;
				    border-radius: 2px;
			}
		}
	}
	/*chrome浏览器下去除横向滚动条*/
	.miaosha1::-webkit-scrollbar{
		display:none;
	}
}
//样式需要将 px转rem
	```
	--9.2 将组件引入到main页面，并且在html调用该组件，传参
	定义变量
```
miaoshaList:[],//秒杀列表
			nowTime:0,//现在的时间戳
			endTime:0//结束的事件戳
			
			
```
获取数据
```
componentDidMount(){
		
		//获取秒杀数据
		this.getMiaoShaData();
	}
	
	//秒杀数据
	getMiaoShaData=()=>{
		axios.get("activity/specials/info?count=8&code=Home_flashSale__Top_Img&stock_code=&device_id=646b29c0-6d74-11ea-9bcd-c53527f03e1c")
		.then(res=>{
			console.log(res);
			this.setState({
				miaoshaList:res.data.data.specials_item_v_o_s,
				nowTime:res.data.data.now,
				endTime:res.data.data.specials_time_ranges[0].end
			})
		})
	}
```
html中引入组件，传参
```
const {bimaiList,bimaiNav,lunboList,miaoshaList,nowTime,endTime} = this.state;

{
	nowTime !==0 && endTime!==0?
	<JinRiMiaoSha miaoshaList={miaoshaList} nowTime={nowTime} endTime={endTime}/>:""	
}
```

##10.列表页的上拉触底加载下一页
	--10.1 在src/pages/index.js中添加相应的链接和图片
```
import {Link} from 'react-router-dom';

<Link to="/list">
	<img className="hufu" src="https://image.watsons.com.cn//upload/6b197213.jpg" alt="护肤会场"/>
	</Link>
	```
	--10.2 修改对应的css src/pages/main/index.scss
```
.hufu{
		width:100%;
	}
	```
	
	--10.3新建 列表页面src/pages/list/index.js
```
import React,{Component} from 'react';

class List extends Component{
	render(){
		return (
		<div>列表页</div>
		)
	}
}

export default List;
	```
	--10.4 添加相应的路由 src/router/index.js
```
import List from '../pages/list';
<Route path="/list" component={List} />
	```
	--10.5修改列表页内容，先获取数据，渲染，src/pages/list/index.js
```
import React,{Component} from 'react';
import axios from 'axios';
import './index.scss';
class List extends Component{
	constructor() {
	    super();
		this.state={
			listArr:[],// 列表页的数组
			page:1,//当前页,默认为第一页
			end:false//false 还没到底,true 到底了
		}
	}
	componentDidMount(){
		axios.get("https://h5.watsons.com.cn/item/ws/group_list?current_page=1&page_size=24&group_id=28516&device_id=d667b580-6e63-11ea-bc08-f9000f2957ab").then(res=>{
			let listArr = res.data.data.item_list;
			//将数据保存到 state
			this.setState({
				listArr:listArr
			})
		})
		
		//触发滚动事件
		this.ListScroll();
	}
	
	ListScroll=()=>{
		window.onscroll=()=>{
			//滚动距离
			let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
			//获取窗口的可视高度
			let windowHeight = document.documentElement.clientHeight;
			let scrollHeight = document.body.scrollHeight;
			//console.log("scrollTop:"+scrollTop);
			//console.log("windowHeight:"+windowHeight);
			//console.log("scrollHeight:"+scrollHeight);
			if(scrollHeight - scrollTop <= windowHeight){//触底了,需要加载下一页的数据
				//将当前页加一
				this.setState({
					page:this.state.page+1
				})
				//获取新数据
				this.moreData(this.state.page);
				
				
				
			}
		}	
	}
	//获取新数据的函数
	moreData=(page)=>{
		if(!this.state.end){//判断是否到底了
			//获取数据
			axios.get("https://h5.watsons.com.cn/item/ws/group_list?current_page="+page+"&page_size=24&group_id=28516&device_id=d667b580-6e63-11ea-bc08-f9000f2957ab").then(res=>{
				let dataArr = res.data.data.item_list;
				if(dataArr === undefined){//到底了
					console.log("到底了");
					this.setState({
						end:true
					})
				}else{
					//获取的新数据需要追加在第一页数据的后面
					let oldArr = this.state.listArr;
					let newArr = oldArr.concat(dataArr);
					console.log(newArr);
					// //将数据保存到 state
					this.setState({
						listArr:newArr
					})
				}
				
			})
		}
		
	}
	
	
	render(){
		let {listArr} = this.state; 
		return (
		<div className="list-con">
			<h3>护肤</h3>
			<ul >
				{
					listArr.map((item,index)=>{
						return (
						<li key={index}>
						<img src={item.over_image_url} alt={item.item_short_name}/>
						{item.item_short_name}
						</li>
						)
					})
				}
			</ul>
		</div>
		)
	}
}
//到底时,需要 提示"已经到底了,请不要在拉了!"
//list页面是不需要 默认头部的
//首页的层级问题需要修改
//报红的bug需要修改
export default List;
```

--10.6修改列表页内容，先获取数据，渲染，src/pages/list/index.scss
```
.list-con{
	ul{
		display: flex;
		flex-wrap: wrap;
		justify-content: space-around;
		li{
			width: 45%;
			img{width:100%}
		} 
	}
}
```
##11.报红的bug需要修改  
```
//组件卸载时,将没有停止的setState全部停止
	componentWillUnmount = () => {
	    this.setState = (state,callback)=>{
	      return;
	    };
	}
```
##12.默认头部的修改，src/components/common/header/index.js
```
//添加react路由的高阶函数
import {NavLink,withRouter} from 'react-router-dom';

export default withRouter(Header);


//我们的 this.props.location.pathname就可以使用了
	```
	
##13.item页
	--13.1 添加内容页
	src/pages/item/index.js
```
import React,{Component} from 'react';
import './index.scss';
class Item extends Component{
	render(){
		console.log(this.props.location);
		let item = this.props.location.state;
		return (
		<div className="item-con">
			<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">护肤</span></h3>
			<div>
				<img src={item.over_image_url} alt={item.item_short_name}/>
			</div>
		</div>)
	}
}
export default Item;
	```
	--13.2添加内容页的样式
src/pages/item/index.scss
```
.item-con{
	margin-top: -50px;
	h3{
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
		
		
	}
	img{width:100%;}
}
```
	--13.3添加相应的路由 src/router/index.js
```
import Item from '../pages/item';
<Route path="/item" component={Item} />
	```
	--13.4 从首页的必卖页面跳转到内容页
```
	import {Link} from 'react-router-dom';
	<Link to={{pathname:'/item',state:item}}>
		<img src={item.over_image_url} alt={item.item_short_name}/>
		{item.item_short_name}
	</Link>	
	```
	
##14.购物车操作
	--14.1 添加item页代码 src/pages/item/index.js
```
import React,{Component} from 'react';
import {HomeOutlined,ShoppingCartOutlined} from '@ant-design/icons';
import {message} from 'antd';
import './index.scss';
class Item extends Component{
	//回到首页
	goHome=()=>{
		this.props.history.push('/');
	}
	//跳转到购物车页
	goCart=()=>{
		this.props.history.push('/cart');
	}
	//添加购物车程序
	/*
	1.点击按钮后,将数据添加到 缓存;(调用后台接口)
	2.想要保存到购物车中的数据有:商品id/商品的名称/商品的价格/商品的图片/商品的数量
	3.某商品第一次添加购物车,新增操作;非第一次添加购物车时修改操作
	4.需要在购物车页面获取相应的缓存数据,进行渲染
	*/
	addCart=()=>{
		//1.去除缓存中的数据
		var myCart = JSON.parse(localStorage.getItem('cart'));
		var data = [];//保存想要往购物车中存的数据
		var itemObj = this.props.location.state;
		var type = true;
		if(myCart !== null && myCart.length){//有数据
			//如果有数据,需要修改数据
			myCart.map((item)=>{
				if(item.id === itemObj.item_id){//在购物车找到了该商品
					//数量加一
					item.num++;
					type = false;
				}
				data.push(item);
			})
		}
		//新增数据
		if(type){
			data.push({
				id:itemObj.item_id,
				num:1,
				price:itemObj.min_price,
				image_url:itemObj.over_image_url,
				name:itemObj.item_short_name
			})
		}
		//将数据保存到缓存,在缓存中需要将数据保存成字符串
		localStorage.setItem('cart',JSON.stringify(data)  );
		message.info('添加成功',1);
	}
	
	render(){
		console.log(this.props.location);
		let item = this.props.location.state;
		return (
		<div className="item-con">
			<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">护肤</span></h3>
			<div>
				<img src={item.over_image_url} alt={item.item_short_name}/>
			</div>
			<div className="btns">
				<div onClick={this.addCart}>加入购物车</div>
				<div>立即购买</div>
			</div>
			<div className="icon-btn">
				<HomeOutlined onClick={this.goHome} />
				<ShoppingCartOutlined onClick={this.goCart}/>
			</div>
		</div>)
	}
}
export default Item;

//当添加购物车时,购物车的小图标上有角标变化
	```
	
	--14.2 添加item页样式 src/pages/item/index.js
```
.item-con{
	margin-top: -50px;
	h3{
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
		
		
	}
	img{width:100%;}
	.btns{
		width: 100%;
		height: 50px;
		line-height:50px;
		display: flex;
		position: fixed;
		bottom:0;
		left:0;
		right:0;
		text-align: center;
		justify-content: space-around;
		background: #fe91ae;
		font-size:14px;
		color:#fff;
		div:nth-of-type(1){width:50%;}
		div:nth-of-type(2){width:50%;background-color: #ff6692;}
	}
	.icon-btn{
		position:fixed;
		bottom:50px;
		right:10px;
		width: 50px;
		height:120px;
		font-size: 20px;
		
		span{
			width:50px;
			height: 50px;
			border:1px solid #ccc;
			border-radius: 50%;
			line-height: 50px;
			margin-bottom:5px;
		}
	}
}
	```
	
	--14.3添加cart页面 src/pages/cart/index.js
```
import React,{Component} from 'react';
import {Button} from 'antd';
import './index.scss'; 
class Cart extends Component{
	constructor() {
	    super();
		this.state = {
			type:true ,//true 购物车为空  false  购物车不为空
			listArr:[]//购物车中的数据
		}
	}
	componentDidMount(){
		var arr = JSON.parse(localStorage.getItem('cart'));
		if(arr !==null && arr.length){//购物车中有数据
			this.setState({
				type:false,
				listArr:arr
			})
		}	
	}
	goHome=()=>{
		this.props.history.push('/');
	}
	render(){
		const {type,listArr} = this.state;
		return(
			<div className="cart-con">
				<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">购物车</span></h3>
				{
					type?<div>
					<img className="cart-img" alt="购物车为空" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKwAAADbCAMAAADHyIqTAAADAFBMVEVMaXHb2Njb2NilpaXX19fZ2Nja2Nja2Nja1dXZ19fZ19fa2NjX19fZ19fu7u7Z2Nja2dnV1dXa19fJycnX19fb2dm1tbXa2Nja2dnr6urU0tLa19fX19fZ0tLa2Nj////s7OzZ19fZ19fs6urt6+va2Njb2dn37u7t6ura2NjZ19fZ2Nja2NjZ19fa19fa19fs6ura2Njs6enS0tLa19fZ2Njs6ura2dnr6uoAAADt6urZ2dna19fs6ena19fb2Nja2Njs6urz8/PY2Nja1dXY19fc1NTa1dXZ1tbY19fX19fY19fb19fZ1dXX19fc2dnZ19fT09PZ2Nja2Njr6enb2NjW1tba19fZ2Nja19fW1tbZ19fa2Njs6enZ2dna2Njb2dns6urZ2NjX1tbR0dHa19fa2Njb2dna19fb2dna2Njr6+u2trba2dna09Pt6+vZ2NjX19fZ19fs6ura19fU1NTb2Njb19fb19fs6+vr6urs6enr6urr6enb2NjZ19fZ1tbPz8/Y2NjX19fa2Nja2Njb29vc2Ni/v7/Z19fX19fa19fY19fZ19fZ2Nja19fY19fa19fa2dnW1tbZ19fs6ura19fa2Nja2Nja2Nja19fc2trb2NjZ2NjZ19fx6urY2NjZ2Nja2trs6enZ19fa1tbu7u7Z2NjZ19fr6enZ19fr6urt7e3c29vu6urs6urr6ent7e3s6ens6urs6urb2Njs6urr6urs7Ozs6urs6urZ2Nju7u7a19ft6urr6+vt6urv6+vs7Ozr6+vs7Ozx6urr6enY1dXW1tbW1tbZ2NjZ2Nja2NjZ19fZ19fY2Njs6urs6ens6enb2Njc2trs6urb2dnr6ena19fr6enb2dns6urt6+vs6urt6urs6urs6enm5OTa2Nja2trj4eHl4uLo5uba2Nja2Njr6enq6Ojb2dnq5+fl5OTj4eHp5ube3Nzk4uLg3t7f3d3h39/e3d3c2tro5eXi4ODd2trn5ubc2trb2Njq6enn5OTp5+c0StHGAAAA6HRSTlMAVaoBTKOR/TDB8/8K7RHl3RfUCR73A/HrthzNBRTEAk59cP1+2/4LRvn6imTnTz36cuwRZtj+r8MBVhGs1V10heQUJjZBIS9XVSBbQjtG8ZQMUqno7xlqwqYxrrvgM5nj/JUqFuB66Z+hx3MHtCiKyTr78u4jpEqQiNDtjqbooVEPaBNunE47CI5N9WJZt2stX88sf5VEvox4uWDAtnYlTtYZycuXLcq0+IHbHTdKnfU4sNaD4supUZK5kAeyY1pTP0Q0KCTpSCU40JeH0oMnbLrS9n3vt97O3dXuf7JiebzN81r+iyjr8dIe/AAAC1pJREFUeNrt3HdUFNceB/CfDxXZH12EICsCShNEESwIYseGioiKvft8drF3sfcSuz4TazQakxhjmqYbTSwxkfT+2uGwBAKIoB4jz+Bvh5VZ2blTruM5+/nP1bvznZk7d+79zaygrtCd0dW84Okwxw0RMz43wlOgSQiWmwtPgWB8KGQY6F4Smu0B3YtCs9mge9XQ7G/2sPaw9rD2sPaw9rD2sPaw9rD2sPawVai3qu2qek86bHxUdKor2BTZGxF7Rz7ZsPuyELHfAJtZaTs1n2TYdtR+n40+0BtFabmHHYAkKx6qsgpRlJZ32FWOaBYFVWmLorS8w56qg4JoaUeW0vIP2/EZrJAqqc9SWv5hPdyxQj9XaaMBpeUdNtQPLWwGG2qK0nIMW38yWvgHAGNarmFXooUhRmBOyzHsV2jh2VAA9rTcwu5DC2MPAchJyynsnAzLgWA0gLy0XMIO+zdWqNMEQG5aDmGT/o4VQqoBcEgrN6xrc7QQBMAp7WokDI9rnP3Rwm4AXmlDHZEkSr4ZtEQLfR1AYdp27A2DnUGiuWjhn+cBFKYNWc16Tp85JXlWGIIVfogHUJx2MsMtPsi/9w/DPUCqb7DCCC8A5WkXg2ZGoKB3F5CtJpew2WgWngygRtrJoJmWSEL+A6A0LV1gmkk2X2DPgULtQsqzjgMN7Xm4ja9AsdWTFy+evBo0deqbEdktk8GON+eOlzbMvubuMq1vZF3QtbpbBwZnoVnjrqBfTWq44CMM20CnRvd1xMr8QJ+CXNAK0KM+49GaabrMugmtMYwG/VnTEq1p3A10aC1ayN51ZVzshsRlKxJ1Oc4uRUF4wlIP0LPlwWi2vxPoXCASx3EOoHMejc1ZB4DurUCyFnTPeISyXusDujcog8J2A/2LpqyXJ4H+vUthx7FMe7vU4kFUg6lNg2zGMOlR+/Zz5MKnZVKlp4y0MHB3lrzumYDcXI4HS5fo4+MMQx1Hm61uOgKk8kGOloClUfTpBpDqGHJ0BSwNoU+lP7KJRY56WRsMDN1Bqp7Iz9o4sNDdQGX+2iCVFzVp5O+kqXSnvt0qlQrMT5oZ1kDmk+EFnG2gsKMY2uwVujlnEbThFSCZMIBEPqmZwSUZE+DdvCeznrROvM7QqBeFfRf46j8Ty53NZGh0PRzLeRqBq05Ui/MHBplnsZxLf+Bqo3ALZhDnTwtMzuv2E7J+p7eEWm0ErvrSZpeyPfChVieAJ4cjdELZHoymUtiBfAtHjalcWA9Y1KLL8hjXAs6WDKrGewOLetm0j/HAUZS8l8K8v6N5F9fnI89R2M+BTQK1WwccmR8k9JD5onhb4CidNvoZsEmkdit5PvYYS+/3HQI20ymsE/DTMUvmjKSuD1VGOBYeezEXOMgkeudu/SzgZrPsKvImatkZuEmhTcYCq3NCS272yj4+A6jlOeBFKHAkAaudFHY/8OJlEN5jZPUpjSMHeZXLhQLHLgUjdF3eBY4rSu59vAscQcBuJcOsQtU3/eYomq/xYbxGBY4pCmbCCcCHB70U45YpZ43RiNYYnFY2w2glNSFO2eqNi674UA0l6+KMLcDFdgo7TmHFgYuBih4wnxBew+XB4RgVOAaBHD0o7HjgIZ4ukWx5l0gnCpsOPGyjweeyN8hxiCq7Y7msbA6Yh3VlNfOsT4GDtsJvY+Q5LjwD5MA8FUlU+JbdZuDAiTY2HeSJpfYpHAscPnKnz50p7F7QnLAwaS53YZK0nr5gDbDiv+Rzdpd9amQvpueCXLvwoZ6gNaFMsQzkGo4PbQVm/AtA0cJArbU15tJaEshVncIOBq0JRUtnkGu0aHKhlZ5CgUO2GDeato0BjW2lsMMVTIinCRNijV2lsNEqLDVSeRU4qqvwrvg40Jb3ZXrsNpr78pidRzYVOGIUFR74rGwGmQscDoqGPz6vn3RT4/8DzqRZ5sz+fH5HEQgi7K+fYBT/Age7FC7vTDlMoPF8GCiRivQ1B4AV/zvlmMWU1q0TsOI/BxmOxGUZ64SI/+yuSxaaNZ+b2O3AnJ2dp3fqsqXjrO5eHmMyM51rG40OcWr96uMqKHQUxRwds9YbfFyy3dzcgz09/Y6lO+0/PjhhyfhRKRFXtwdGB8VGbuy6NKpX8vTPBnWZMuWv3YrJ7OM8yRin9YpkTDAq4JgRnmUwzHRxcxvrftDT70i6095NLRNqLDmasjbiRGDboGWRW3ukHvBTba033Qc5UGsVPacfcqBWfWK6J3KgVuVnecRM5KAmqGNWoF84am2AepP50RtP7B41vMbAhMGb9qb7+33nedB9rFtjFxcfQ3gjR0dUQbJmcw9vo9HZOSa+/yGv7h2n1BrUs2fyznVRGxNjl62IDtx+NWLU0fE1Egbv3+uUPs3P82Dwg93KdjEYssIzrO8WvTv05MV5G537xMTX86j7YLe6DOrUs3Ov6qlde2yIXdF2z4l2EedmOwrPLvSvFoV1Al0Tv0nIH793NPkbzP/tV+UFjm2gf8Ib2zGgf9toMJgWp16BJ2j87Bqa2KX6rwy2BKPWAkElk9JRc11VvMloiQocKumMmnPxUPFtUa1N8wa1zOXXZZWrnaLtsXUbAGqa1Wtdda2sS/YAOzs7OztB7f6zvDJBOaNHUvflDqAhr82Dm880+Lj5727irWg102O2Z7bB0Njv6BxnraKmuKAgPap+h08+/uiD9ya+/vYri157p9Ubbb5vn9bsxxmvvjiyRYuRL74648dmae2/b/NGq3deW/TK269PfO+Djz7+pEN9AIgJPIsCz0gjaKCHGz6i6PccdiPTbvyrNz5iyHVQ2/nhWNmduzkyFGJlZ5uAalw//GLHl0P/i6g0LWUVq/O/D11Bseffn+fbvnwbeWhNgYk1aylaU1KW09533vvPyz6eYQ19Fwjb+CMXrcpnzGoqQKuKHv71At+GYazHOPTlhfNb5FgqRkHunRKLP5TJ7gT3LL8HS4V/0mL+wpdDQaIXGrZqWnkbZfeEbppXZjKVFss8tH/eQVJSeNdkupt/r9KhJU1bNXzBdv399LyTVR6QIuqkeUJ4pl57H0lBGXXh3MeeopPzTld1g3up4dAc626KLqh8JCwDgtCqhFpZ7HVejtjQhi895qAG+DawcfYsv9Ek+kgCYadviz+y3p8a+AaID2/91m2q2EZZrvhcmbttIUNWYQ9LxT2MOq1Ym9b14REBZ+hvqg5bYhKf0XwZYe/RTlv2g5uPb3YmACp0eNPGRv4wh/1THPY2S1jzYGUlbFFVDd/sACSsma2NlOWKr6Yipm5ACsQd/TZ9VFxlw2ZhUK51Uwn3HdFhvGvOf58hq7CHBaKDbWunm7aGB95qIGEjxZUHGNMtWbewQjRHE31zqY2mDd4CcE1jGsxz80zlnfgmWr0uJPcnzC//HlOx9JtLmitMZbxNYsHtvMIi2iYdarZ+QEqKCwuLSlhu21PhsLSN5KF1t0zKZ4g0R7TpMMyQOOjcRGtymWffxWiJ6QTNgMNSe1sJitF1onxCWyyl6WFJfZbGKoVTb1ImSktzOQl91jVNcto7CrOS30U96rakrGmuNM5KUvZofyvIy5HHlP/ISSqh77E5ztIdTKq7wliTe6t8wJWp7PYdYZcLbX8P3cFobsCwmfsPtnOvKK8sRxlTaX7BX0lLpUWluQHNunSOZl3CfFbHzgSIVwo6RSsF8RpMX2gNxrC65YZldUt1g6kn9ZL05NTTDqwVGf6oIsNc6+KPal3MVcSfqIrI0QLfn8JcldVneaD6rEqV7waajU5Dv9zxBVW+1XL+QsDEHT/PX6DiOZ//846JARfOg3ZCL4T98uvCRb/duDhSTsKRF2/8tmjhr7+EXQgFnkTPwb5tf7HZ1xXPwb5udrH9t+LnYPL9H4Mw+tzydfOCAAAAAElFTkSuQmCC" />
					<div className="cart-text">剁剁剁!装满购物车!</div>
					<div><Button type="primary" className="cart-btn" onClick={this.goHome}>去首页逛逛</Button></div>
					</div>:<ul>
					{
						listArr.map((item)=>{
							return (
								<li key={item.id}>{item.name}</li>
								)
						})
					}
					</ul>
				}			
			</div>
		)
	}
}

export default Cart;
	```
	--14.4 添加cart页面css src/pages/cart/index.scss
```
.cart-con{
	margin-top: -50px;
	text-align: center;
	background-color: #eee;
	h3{
		text-align: left;
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
	}
	.cart-img{width: 20%;margin-bottom: 20px; margin-top:100px;}
	.cart-text{font-size:16px; margin-bottom:20px;}
	.cart-btn{margin-bottom:50px ;}
}
	```
	--14.5 给cart页面设置路由src/router/index.js中设置
```
import Cart from '../pages/cart';

<Route path="/cart" component={Cart} />
	```
	--14.6 内容页添加购物车时，购物车图标上的红色的小角标  src/pages/item/index.js   
```
constructor(){
		super();
		this.state = {
			countTotal : 0//购物车的总数量
		}
	}
	
	//计算购物车中的商品总数
	totalNum = ()=>{
		//获取缓存中的数据
		let arr = JSON.parse(localStorage.getItem('cart'));
		let total = 0;
		if(arr !== null && arr.length){//购物车中有商品
			arr.map(item=>{
				//计算了总数量
				total += item.num;
				return null;
			})
		}
		console.log(73,total);
		//将总数量添加到 state
		this.setState({
			countTotal:total
		})
		
	}
	
	```
	该函数需要在挂载后的钩子函数调用
```
componentDidMount(){
		//调用计算总数量的函数
		this.totalNum();
	}
```

	修改了添加购物车的函数
```
addCart=()=>{
		//1.去除缓存中的数据
		var myCart = JSON.parse(localStorage.getItem('cart'));
		var data = [];//保存想要往购物车中存的数据
		var itemObj = this.props.location.state;
		var type = true;
		if(myCart !== null && myCart.length){//有数据
			//如果有数据,需要修改数据
			myCart.map((item)=>{
				if(item.id === itemObj.item_id){//在购物车找到了该商品
					//数量加一
					item.num++;
					item.checkType = true;
					type = false;
				}
				data.push(item);
				return null;
			})
		}
		//新增数据
		if(type){
			data.push({
				id:itemObj.item_id,
				num:1,
				price:itemObj.min_price,
				image_url:itemObj.over_image_url,
				name:itemObj.item_short_name,
				checkType:true//商品添加购物车时,默认是选中状态
			})
		}
		//将数据保存到缓存,在缓存中需要将数据保存成字符串
		localStorage.setItem('cart',JSON.stringify(data)  );
		message.info('添加成功',1);
		//计算购物车中的总数量
		this.totalNum();
	}
	```


html布局
```
<div className="icon-btn">
				<HomeOutlined onClick={this.goHome} className="icon-home" />
				<Badge count={this.state.countTotal} className="icon-cart"><ShoppingCartOutlined onClick={this.goCart}/></Badge>
			</div>
```
css   修改的是src/pages/item/index.scss
```
.icon-home,.icon-cart{
			font-size: 20px;
			width:50px;
			height: 50px;
			line-height:50px;
			text-align:center;
			border:1px solid #ccc;
			border-radius: 50%;
			line-height: 50px;
			margin-bottom:5px;
		}
```

	--14.7 购物车页面做了相应的更改  src/pages/cart/index.js
```
import React,{Component} from 'react';
import {Button} from 'antd';
import './index.scss'; 
class Cart extends Component{
	constructor() {
	    super();
		this.state = {
			type:true ,//true 购物车为空  false  购物车不为空
			listArr:[]//购物车中的数据
		}
	}
	componentDidMount(){
		var arr = JSON.parse(localStorage.getItem('cart'));
		if(arr !==null && arr.length){//购物车中有数据
			this.setState({
				type:false,
				listArr:arr
			})
		}	
	}
	goHome=()=>{
		this.props.history.push('/');
	}
	//点击checkbox按钮时,更改缓存的数据
	
	changeType=(id)=>{
		console.log(id);
		var arr = JSON.parse(localStorage.getItem('cart'));
		var data = [];
		if(arr !== null && arr.length){
			arr.map((item)=>{
				if(item.id === id){//找到了该条记录
					item.checkType = !item.checkType;
				}
				data.push(item);
				return null;
			})
		}
		//保证页面的数据和新数据一致
		this.setState({
			listArr:arr
		})
		//保存到缓存
		localStorage.setItem('cart',JSON.stringify(data));
	}
	
	render(){
		const {type,listArr} = this.state;
		return(
			<div className="cart-con">
				<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">购物车</span></h3>
				{
					type?<div className="cart-null">
					<img className="cart-img" alt="购物车为空" src="data:image/png;base64,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" />
					<div className="cart-text">剁剁剁!装满购物车!</div>
					<div><Button type="primary" className="cart-btn" onClick={this.goHome}>去首页逛逛</Button></div>
					</div>:<ul className="cart-list">
					{
						listArr.map((item)=>{
							return (
								<li key={item.id}>
									<div className="cart-i-check">
										<input type="checkbox" name="check" checked={item.checkType} 
										onChange={()=>this.changeType(item.id)}
										/>
									</div>
									<div className="cart-i-img"><img src={item.image_url} alt={item.name}/></div>
									<div className="cart-i-name">{item.name}</div>
									<div className="cart-i-price">
										<div className="cart-i-p">¥{item.price/100}</div>
										<div className="cart-i-num">x{item.num}</div>
									</div>
								</li>
								)
						})
					}
					</ul>
				}			
			</div>
		)
	}
}

export default Cart;
```
	src/pages/cart/index.scss
	
```
.cart-con{
	margin-top: -50px;
	text-align: center;
	background-color: #eee;
	
	h3{
		text-align: left;
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
	}
	.cart-img{width: 20%;margin-bottom: 20px; margin-top:100px;}
	.cart-text{font-size:16px; margin-bottom:20px;}
	.cart-btn{margin-bottom:50px ;}
	.cart-list{
		li{
			display: flex;
			flex-direction: row;
			flex-wrap: nowrap;
			justify-content: space-around;
			background: #fff;
			margin-bottom:10px;
			padding:5px;
			.cart-i-check{
				width:10%;
				height:100px;
				line-height:100px;
			}
			.cart-i-img{
				width:30%;
				img{width: 100%;}
			}
			.cart-i-name{
				width:40%;
				margin-top:10px;
				text-align: left;
			}
			.cart-i-price{
				width:20%;
				margin-top:10px;
				.cart-i-p{color:deeppink;}
				.cart-i-num{color:#ccc;}
			}
			
		}
	}
}
	```
	14.8 购物车页面做全选功能
```
componentDidMount(){
		console.log('挂载');
		var arr = JSON.parse(localStorage.getItem('cart'));
		if(arr !==null && arr.length){//购物车中有数据
			this.setState({
				type:false,
				listArr:arr
			})
		}	
		//修改 全选按钮的状态
		//if(!this.state.type){
			this.allCheckType(arr);
		//}
	}
	goHome=()=>{
		this.props.history.push('/');
	}
	//点击checkbox按钮时,更改缓存的数据
	changeType=(id)=>{
		console.log(id);
		var arr = JSON.parse(localStorage.getItem('cart'));
		var data = [];
		if(arr !== null && arr.length){
			arr.map((item)=>{
				if(item.id === id){//找到了该条记录
					item.checkType = !item.checkType;
				}
				data.push(item);
				return null;
			})
		}
		//保证页面的数据和新数据一致
		this.setState({
			listArr:arr
		})
		//保存到缓存
		localStorage.setItem('cart',JSON.stringify(data));
		//需要更改全选按钮的状态
		this.allCheckType(arr);
	}
	
	//当修改checkbox的状态时,需要更改全选按钮的状态
	allCheckType=(arr)=>{
		let nn = 0;//记录选中的checkbox的个数
		if(arr){
			arr.map(item=>{
				if(item.checkType){
					nn++;
				}
				return null;
			})
			//判断,如果 nn等于 商品的种类的个数,表示已经全选了
			if(nn === arr.length){
				this.refs.allcheck.checked = "checked";
			}else{
				this.refs.allcheck.checked = "";
			}
		}
	}
	
	//全选的函数
	checkAll=()=>{
		let arr = JSON.parse(localStorage.getItem('cart'));
		let data = [];
		//找到全选的按钮
		let checkallBtn = this.refs.allcheck;
		if(checkallBtn.checked){//全选了
			arr.map(item=>{
				item.checkType = true;
				data.push(item);
				return null;
			})
		}else{//全不选
			arr.map(item=>{
				item.checkType = false;
				data.push(item);
				return null;
			})
		}
		//将值保存到 state
		this.setState({
			listArr:data
		})
		//将值保存到缓存
		localStorage.setItem('cart',JSON.stringify(data));
	}
	
	//计算总价  ,需要在点击全选按钮或点击 每种商品的checkbox按钮时调用一次
	
	```
	html:
```
<div className="cart-con">
				<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">购物车</span></h3>
				{
					type?<div className="cart-null">
					<img className="cart-img" alt="购物车为空" src="data:image/png;base64,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" />
					<div className="cart-text">剁剁剁!装满购物车!</div>
					<div><Button type="primary" className="cart-btn" onClick={this.goHome}>去首页逛逛</Button></div>
					</div>:
					<div>
						<ul className="cart-list">
						{
							listArr.map((item)=>{
								return (
									<li key={item.id}>
										<div className="cart-i-check">
											<input type="checkbox" name="check" checked={item.checkType} 
											onChange={()=>this.changeType(item.id)}
											/>
										</div>
										<div className="cart-i-img"><img src={item.image_url} alt={item.name}/></div>
										<div className="cart-i-name">{item.name}</div>
										<div className="cart-i-price">
											<div className="cart-i-p">¥{item.price/100}</div>
											<div className="cart-i-num">x{item.num}</div>
										</div>
									</li>
									)
							})
						}
						</ul>
						
					</div>	
				}
							
				<div className="all-check" style={type?{"display":"none"}:{"display":"block"}}>
					<input  type="checkbox" name="allcheck" 
					onChange={this.checkAll} ref="allcheck"/>
				</div>			
			</div>
	```

## 15. 类型检查  src/components/main/mainswiper.js
	-- 引入类型检查的组件
```	
	//引入语法检查的组件
	import PropTypes from 'prop-types';
```	
	--使用
```
//进行数据的格式检查,优势是:当父组件传过来的数据格式不正确时,会有红色提示
//array  传过来的是个数组
//isRequired 传过来ide值不允许是空
//https://www.jianshu.com/p/a73fb26c88b5
MainSwiper.propTypes = {
	lunboList:PropTypes.array.isRequired
}
	```
	
## 16.登录 
	--1.创建登录页面 src/pages/login/index.js
```
import React,{Component} from 'react';
import './index.scss';
import {Input,Button,message } from 'antd';
import axios from 'axios';
class Login extends Component{
	constructor(){
		super();
		this.state = {
			phone:'',
			smsCode:'',
			btnText:'发送验证码',
			disabled:false //true按钮置灰  false 按钮不置灰  
		};
	}
	//输入手机号时,将手机号的值保存到state
	changePhone = (ev)=>{
		//console.log(ev.target.value);
		this.setState({
			phone:ev.target.value
		});
	}
	//输入验证码时,将验证码的值保存到state
	changeSmsCode = (ev)=>{
		//console.log(ev.target.value);
		this.setState({
			smsCode:ev.target.value
		});
	}
	//发送验证码
	/*
	1.获取到手机号
	2.验证手机号的格式
	3.调用后台接口,发送验证码
	*/
	sendSmsCode=()=>{
		let phone = this.state.phone.trim();
		let reg = /\S/;//空白符验证
		let re = /^1\d{10}$/;
		
		if(phone === '' || !reg.test(phone)){
			message.error('请输入手机号',0.5);
		}else if(!re.test(phone)){
			message.error('手机号请输入正确的格式',0.5);
		}else{
			console.log('可以调用后台接口了');
			axios.get('http://127.0.0.1:7001/sms/addSms?phone='+phone).then(res=>{
				console.log(res);
				message.info('验证码已发送请注意查收',0.5);
				this.setState({
					disabled:true
				})
				//定时器
				let i= 60;
				let timer = setInterval(()=>{
					i--;
					this.setState({
						btnText:'重发('+i+'s)'
					})
					if(i<=0){
						this.setState({
							btnText:'发送验证码',
							disabled:false
						})
						//停止定时器
						clearInterval(timer);
					}
				},1000); 
			});
		}
	}
	/*
	登录操作
	1.首先获取到 手机号和验证码
	2.验证格式是否正确
	3.调用后台接口,进行注册或登录操作
	*/
	sendLogin = ()=>{
		console.log(this.state);
		//获取数据,验证
		let phone = this.state.phone.trim();
		let reg = /\S/;//空白符验证
		let re = /^1\d{10}$/;
		
		let sms = this.state.smsCode.trim();
		let re1 = /^\d{4}$/;
		
		
		if(phone === '' || !reg.test(phone)){
			message.error('请输入手机号',0.5);
		}else if(!re.test(phone)){
			message.error('手机号请输入正确的格式',0.5);
		}else if(sms === '' ||  !reg.test(sms)){
			message.error('请输入验证码',0.5);
		}else if(!re1.test(sms)){
			message.error('验证码请输入正确的格式',0.5);
		}else{
			var params = new URLSearchParams();
			params.append('phone',this.state.phone);
			params.append('smsCode',this.state.smsCode);
			
			//调用后台接口,获取登录成功的数据
			axios.post('http://127.0.0.1:7001/user/login',params).then(res=>{
				console.log(res);
				if(res.data.code === 1){//失败
					message.error(res.data.msg,1);
				}else{
					//将成功的信息保存到storage
					localStorage.setItem('token',res.data.data.token);
					//跳转页面
					this.props.history.push('/center');
				}
			});
		}
	}
	
	componentWillUnmount(){
		this.setState = (state,callback)=>{
			return;
		}
	}
	
	render(){
		let {btnText,disabled} = this.state;
		return (
		<div className = "login-con">
			<h3> <span onClick={this.goHome}>{"<"}</span> <span className="list-title">登录/注册</span></h3>
			<div className="login-img"><img src="https://image.watsons.com.cn//upload/46c5e4a3.png" alt="qcs" /></div>
			<div className="login-form">
				<Input type="text" className="phone" placeholder="请输入手机号" name="phone" 
				onInput={this.changePhone}  value={this.state.phone}/>
				<br/>
				<Input type="text" className="sms" placeholder="请输入验证码" name="smsCode"
				 onInput={this.changeSmsCode}/>
				<Button className="sms-btn" type="primary" 
				disabled={disabled}
				onClick={this.sendSmsCode}>{btnText}</Button>
				<br/>
				<Button type="primary" className="login-btn" onClick={this.sendLogin}  >登录/注册</Button>
			</div>
		</div>
		)
	}
}

export default Login ;
	```
	src/pages/login/index.scss
```
.login-con{
	margin-top: -50px;
	h3{
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
		
		
	}
	.login-img{
		margin-top:150px;
		text-align: center;
			img{width:30%;}
	}
	.login-form{
		margin-left:10%;
		margin-right:10%;
		margin-top:20px;
		input{
			height:45px;
			margin-bottom:10px;
		}
		.sms{
			width: 50%;
			
		}
		.sms-btn{
			height:45px;
			float: right;
		}
		.login-btn{
			width:100%;
			height:45px;
			margin-top:50px;
		}
	}
}	
	```
	
	--2.添加登录路由
```
import Login from '../pages/login';
<Route path="/login" component={Login}/>
```

## 17.用户中心
	--1.添加页面
```
import React,{Component} from 'react';

class Center extends Component{
	render(){
		return (
		<div>用户中心页面</div>
		)
	}
}

export default Center ;
	```
	
	--2.添加路由
```
import Center from '../pages/center';
<Route path="/center" component={Center} />
	```
	
	
## 18.用户中心的路由守卫、用户中心的退出操作
	--18.1 在头部添加用户中心和购物车的链接  src/components/common/header/index.js添加相应的代码
```
<Link to="/center"><UserOutlined className="header-font"/></Link>
<Link to="/cart"><ShoppingCartOutlined className="header-font"/></Link>
	```
	--18.2 修改用户中心页代码  src/pages/center/index.js
```
import React,{Component} from 'react';
import {Redirect} from 'react-router-dom';
import axios from 'axios';
import {Button} from 'antd';
import './index.scss';
class Center extends Component{
	constructor() {
	    super();
		this.state = {
			tokenType:1//默认值1 表示成功
		}
	}
	//调用后台接口判断登录状态
	//token 叫做令牌,一般情况下是为了后台验证登录的状态,
	//登录成功时会给前台发送一个token,后面每次请求数据时请带着这个token,
	//如果token的验证和后台保存的一致,表示状态ok,就可以给前台提供数据了
	componentDidMount(){
		axios.get("http://127.0.0.1:7001/center",{
			headers:{
				'Authorization':localStorage['token']
			}
		}).then(res=>{
			console.log(res);
			if(res.data.code === 0){//登录成功的
				this.setState({
					tokenType:true
				})
			}else{//失败
				this.setState({
					tokenType:false
				})
			}
		});
	}
	logout=()=>{
		localStorage['token'] = "";
		this.props.history.push("/");
	}
	render(){
		const {tokenType} = this.state;	
		if(tokenType){//已经登录了
			return <div className="center-con">
			<h3>用户中心页</h3>
			<Button type="primary" onClick={this.logout}>退出</Button>
			</div>
		}else{//没有登录  ,跳转到登录页
			return <Redirect to = "/login" />
		}
	}
}
export default Center ;
	```
	
	src/pages/center/index.scss
```
.center-con{
	margin-top: -50px;
	text-align: center;
	background-color: #eee;
	
	h3{
		text-align: left;
		height:50px;
		line-height: 50px;
		border-bottom:1px solid #ccc;
		font-size:20px;
		padding-left:5%;
		position: fixed;
		top:0;
		left:0;
		right:0;
		background-color: #fff;
		.list-title{padding-left:35%;}
	}
}
	```
	
## 19.对路由守卫进行封装  

## 20.将返回封装为高阶组件的形式

## 21.后台接口进行封装
	
	
	